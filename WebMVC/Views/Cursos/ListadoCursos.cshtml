@model IEnumerable<NextLevel.Compartidos.DTOs.Cursos.CursoVistaPreviaDTO>

@{
    ViewData["Title"] = "Listado de Cursos";
}
@section Header {
    @await Html.PartialAsync("~/Views/Home/Header.cshtml")
}

@section Styles {
    <link rel="stylesheet" href="~/css/cursos/ListadoCursos.css" />
    <link rel="stylesheet" href="~/css/cursos/Buscador.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
}

@section ScriptsJs {
    <script src="~/js/Cursos/Buscador.js"></script>
}

<div class="cursos-section py-5">
    <div class="container">

        <div class="top-tools">
            <h2 class="text-center fw-bold mb-5 titulo-cursos d-none d-lg-block ">Nuestros Cursos</h2>
            <div class="search-filter-wrapper">
                <div class="order-menu" id="orderMenu">
                    <div class="hamburger" id="hamburgerBtn">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <ul class="order-options" id="orderOptions">
                        <!-- Nombre -->
                        <li data-opcion="Nombre" class="has-submenu" data-url="/Cursos/ListadoCursos" >
                            Nombre
                            <div class="submenu">
                                <button data-sort="asc">A-Z</button>
                                <button data-sort="desc">Z-A</button>
                            </div>
                        </li>

                        <!-- Calificación -->
                        <li data-opcion="Calificacion" class="has-submenu" data-url="/Cursos/ListadoCursos">
                            Calificación
                            <div class="submenu">
                                <button data-rating="1">1-2</button>
                                <button data-rating="2">2-3</button>
                                <button data-rating="3">3-4</button>
                                <button data-rating="4">4-5</button>
                            </div>
                        </li>

                        <!-- Docente -->
                        <li data-opcion="Docente" class="has-submenu" data-url="/Cursos/ListadoCursos">
                            Docente
                            <div class="submenu">
                                <input type="text" placeholder="Nombre del docente" class="docente-input">
                                <button class="docente-submit">Buscar</button>
                            </div>
                        </li>
                    </ul>
                </div>


                <form method="get" asp-action="ListadoCursos">
                    <div class="search-box">
                        <input type="text" name="filtro" placeholder="Buscar...">
                        <div class="search-icon">
                            <i class="fa fa-search"></i>
                        </div>
                    </div>
                </form>

            </div>
        </div>

        <h2 class="text-center fw-bold mb-5 titulo-cursos d-lg-none d-block">Nuestros Cursos</h2>

        

        @if (Model == null || !Model.Any())
        {
            <div class="text-center mt-5 mensaje-sin-cursos">
                <h5>No hay cursos disponibles actualmente 😔</h5>
                <p>Vuelve más adelante para descubrir nuevos contenidos.</p>
            </div>
        }
        else
        {
            <div class="row g-4 justify-content-center">
                @foreach (var curso in Model)
                {
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                        <div class="card curso-card h-100 shadow-sm border-0">
                            @if (!string.IsNullOrEmpty(curso.Imagen))
                            {
                                <img src="@curso.Imagen" alt="@curso.Nombre" class="curso-img card-img-top" />
                            }
                            else
                            {
                                <div class="curso-img card-img-top d-flex align-items-center justify-content-center bg-pastel-placeholder">
                                    <span class="text-muted">Sin imagen</span>
                                </div>
                            }

                            <div class="card-body d-flex flex-column">
                                <h5 class="curso-titulo fw-semibold">@curso.Nombre</h5>
                                <h6 class="docente">@curso.DocenteNombreDTO.NombreCompleto</h6>
                                <p class="curso-descripcion flex-grow-1">@curso.Descripcion</p>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <span class="curso-calificacion">
                                        ⭐ @curso.Calificacion.ToString("0.0")
                                    </span>
                                    <a asp-action="DetallesDeUnCurso" asp-route-nombreCurso="@curso.Nombre" class="btn btn-vermas rounded-pill">
                                        Ver más
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>
